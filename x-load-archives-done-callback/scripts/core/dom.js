/* See license.txt for terms of usage */

define(["./array","./css","./sniff","core/trace"],function(t,e,n,r){var o={};return o.getBody=function(t){if(t.body)return t.body;var e=t.getElementsByTagName("body")[0];return e?e:null},o.getAncestorByClass=function(t,n){for(var r=t;r;r=r.parentNode)if(e.hasClass(r,n))return r;return null},o.$=function(){return o.getElementByClass.apply(this,arguments)},o.getElementByClass=function(n,r){if(!n)return null;var i=t.cloneArray(arguments);i.splice(0,1);for(var l=n.firstChild;l;l=l.nextSibling){var f=t.cloneArray(i);if(f.unshift(l),e.hasClass.apply(this,f))return l;var s=o.getElementByClass.apply(this,f);if(s)return s}return null},o.getElementsByClass=function(n,r){function o(n,r,i){for(var l=n.firstChild;l;l=l.nextSibling){var f=t.cloneArray(r);f.unshift(l),e.hasClass.apply(null,f)&&i.push(l),o(l,r,i)}}var i=t.cloneArray(arguments);if(i.shift(),n.querySelectorAll){var l="."+i.join(".");return n.querySelectorAll(l)}var f=[];return o(n,i,f),f},o.getChildByClass=function(t){for(var n=1;n<arguments.length;++n){var r=arguments[n],o=t.firstChild;for(t=null;o;o=o.nextSibling)if(e.hasClass(o,r)){t=o;break}}return t},o.isAncestor=function(t,e){for(var n=t;n;n=n.parentNode)if(n===e)return!0;return!1},o.eraseNode=function(t){for(;t.lastChild;)t.removeChild(t.lastChild)},o.clearNode=function(t){t.innerHTML=""},o.getOverflowParent=function(t){for(var e=t.parentNode;e;e=e.offsetParent)if(e.scrollHeight>e.offsetHeight)return e},o.getElementBox=function(t){var e={};if(t.getBoundingClientRect){var r=t.getBoundingClientRect(),i=n.isIE?document.body.clientTop||document.documentElement.clientTop:0,l=o.getWindowScrollPosition();e.top=Math.round(r.top-i+l.top),e.left=Math.round(r.left-i+l.left),e.height=Math.round(r.bottom-r.top),e.width=Math.round(r.right-r.left)}else{var f=o.getElementPosition(t);e.top=f.top,e.left=f.left,e.height=t.offsetHeight,e.width=t.offsetWidth}return e},o.getElementPosition=function(t){var e=0,n=0;do e+=t.offsetLeft,n+=t.offsetTop;while(t===t.offsetParent);return{left:e,top:n}},o.getWindowSize=function(){var t,e=0,n=0;return"number"==typeof window.innerWidth?(e=window.innerWidth,n=window.innerHeight):(t=document.documentElement)&&(t.clientHeight||t.clientWidth)?(e=t.clientWidth,n=t.clientHeight):(t=document.body)&&(t.clientHeight||t.clientWidth)&&(e=t.clientWidth,n=t.clientHeight),{width:e,height:n}},o.getWindowScrollSize=function(){var t,e=0,r=0;return!n.isIEQuiksMode&&(t=document.documentElement)&&(t.scrollHeight||t.scrollWidth)&&(e=t.scrollWidth,r=t.scrollHeight),(t=document.body)&&(t.scrollHeight||t.scrollWidth)&&(t.scrollWidth>e||t.scrollHeight>r)&&(e=t.scrollWidth,r=t.scrollHeight),{width:e,height:r}},o.getWindowScrollPosition=function(){var t,e=0,n=0;return"number"==typeof window.pageYOffset?(e=window.pageYOffset,n=window.pageXOffset):(t=document.body)&&(t.scrollTop||t.scrollLeft)?(e=t.scrollTop,n=t.scrollLeft):(t=document.documentElement)&&(t.scrollTop||t.scrollLeft)&&(e=t.scrollTop,n=t.scrollLeft),{top:e,left:n}},o.scrollIntoCenterView=function(t,e,n,r){if(t&&(e||(e=o.getOverflowParent(t)),e)){var i=o.getClientOffset(t);if(!r){var l=i.y-e.scrollTop,f=e.scrollTop+e.clientHeight-(i.y+t.offsetHeight);if(0>l||0>f){var s=i.y-e.clientHeight/2;e.scrollTop=s}}if(!n){var c=i.x-e.scrollLeft,a=e.scrollLeft+e.clientWidth-(i.x+t.clientWidth);if(0>c||0>a){var u=i.x-e.clientWidth/2;e.scrollLeft=u}}}},o.getClientOffset=function(t){function e(t,n,r){var o=t.offsetParent,i=r.getComputedStyle(t,"");t.offsetLeft&&(n.x+=t.offsetLeft+parseInt(i.borderLeftWidth,10)),t.offsetTop&&(n.y+=t.offsetTop+parseInt(i.borderTopWidth,10)),o?1===o.nodeType&&e(o,n,r):t.ownerDocument.defaultView.frameElement&&e(t.ownerDocument.defaultView.frameElement,n,t.ownerDocument.defaultView)}var n={x:0,y:0};if(t){var r=t.ownerDocument.defaultView;e(t,n,r)}return n},o});