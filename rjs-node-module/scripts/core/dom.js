/* See license.txt for terms of usage */

define(["./array","./css","./sniff","core/trace"],function(t,e,n,o){var r={};return r.getBody=function(t){if(t.body)return t.body;var e=t.getElementsByTagName("body")[0];return e?e:null},r.getAncestorByClass=function(t,n){for(var o=t;o;o=o.parentNode)if(e.hasClass(o,n))return o;return null},r.$=function(){return r.getElementByClass.apply(this,arguments)},r.getElementByClass=function(n,o){if(!n)return null;var i=t.cloneArray(arguments);i.splice(0,1);for(var l=n.firstChild;l;l=l.nextSibling){var f=t.cloneArray(i);if(f.unshift(l),e.hasClass.apply(this,f))return l;var s=r.getElementByClass.apply(this,f);if(s)return s}return null},r.getElementsByClass=function(n,o){function r(n,o,i){for(var l=n.firstChild;l;l=l.nextSibling){var f=t.cloneArray(o);f.unshift(l),e.hasClass.apply(null,f)&&i.push(l),r(l,o,i)}}var i=t.cloneArray(arguments);if(i.shift(),n.querySelectorAll){var l="."+i.join(".");return n.querySelectorAll(l)}var f=[];return r(n,i,f),f},r.getChildByClass=function(t){for(var n=1;n<arguments.length;++n){var o=arguments[n],r=t.firstChild;for(t=null;r;r=r.nextSibling)if(e.hasClass(r,o)){t=r;break}}return t},r.isAncestor=function(t,e){for(var n=t;n;n=n.parentNode)if(n===e)return!0;return!1},r.eraseNode=function(t){for(;t.lastChild;)t.removeChild(t.lastChild)},r.clearNode=function(t){t.innerHTML=""},r.getOverflowParent=function(t){for(var e=t.parentNode;e;e=e.offsetParent)if(e.scrollHeight>e.offsetHeight)return e},r.getElementBox=function(t){var e={};if(t.getBoundingClientRect){var o=t.getBoundingClientRect(),i=n.isIE?document.body.clientTop||document.documentElement.clientTop:0,l=r.getWindowScrollPosition();e.top=Math.round(o.top-i+l.top),e.left=Math.round(o.left-i+l.left),e.height=Math.round(o.bottom-o.top),e.width=Math.round(o.right-o.left)}else{var f=r.getElementPosition(t);e.top=f.top,e.left=f.left,e.height=t.offsetHeight,e.width=t.offsetWidth}return e},r.getElementPosition=function(t){var e=0,n=0;do e+=t.offsetLeft,n+=t.offsetTop;while(t===t.offsetParent);return{left:e,top:n}},r.getWindowSize=function(){var t,e=0,n=0;return"number"==typeof window.innerWidth?(e=window.innerWidth,n=window.innerHeight):(t=document.documentElement)&&(t.clientHeight||t.clientWidth)?(e=t.clientWidth,n=t.clientHeight):(t=document.body)&&(t.clientHeight||t.clientWidth)&&(e=t.clientWidth,n=t.clientHeight),{width:e,height:n}},r.getWindowScrollSize=function(){var t,e=0,o=0;return!n.isIEQuiksMode&&(t=document.documentElement)&&(t.scrollHeight||t.scrollWidth)&&(e=t.scrollWidth,o=t.scrollHeight),(t=document.body)&&(t.scrollHeight||t.scrollWidth)&&(t.scrollWidth>e||t.scrollHeight>o)&&(e=t.scrollWidth,o=t.scrollHeight),{width:e,height:o}},r.getWindowScrollPosition=function(){var t,e=0,n=0;return"number"==typeof window.pageYOffset?(e=window.pageYOffset,n=window.pageXOffset):(t=document.body)&&(t.scrollTop||t.scrollLeft)?(e=t.scrollTop,n=t.scrollLeft):(t=document.documentElement)&&(t.scrollTop||t.scrollLeft)&&(e=t.scrollTop,n=t.scrollLeft),{top:e,left:n}},r.scrollIntoCenterView=function(t,e,n,o){if(t&&(e||(e=r.getOverflowParent(t)),e)){var i=r.getClientOffset(t);if(!o){var l=i.y-e.scrollTop,f=e.scrollTop+e.clientHeight-(i.y+t.offsetHeight);if(l<0||f<0){var s=i.y-e.clientHeight/2;e.scrollTop=s}}if(!n){var c=i.x-e.scrollLeft,a=e.scrollLeft+e.clientWidth-(i.x+t.clientWidth);if(c<0||a<0){var u=i.x-e.clientWidth/2;e.scrollLeft=u}}}},r.getClientOffset=function(t){function e(t,n,o){var r=t.offsetParent,i=o.getComputedStyle(t,"");t.offsetLeft&&(n.x+=t.offsetLeft+parseInt(i.borderLeftWidth,10)),t.offsetTop&&(n.y+=t.offsetTop+parseInt(i.borderTopWidth,10)),r?1===r.nodeType&&e(r,n,o):t.ownerDocument.defaultView.frameElement&&e(t.ownerDocument.defaultView.frameElement,n,t.ownerDocument.defaultView)}var n={x:0,y:0};if(t){var o=t.ownerDocument.defaultView;e(t,n,o)}return n},r});