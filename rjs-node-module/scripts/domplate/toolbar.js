/* See license.txt for terms of usage */

define("domplate/toolbar",["domplate/domplate","core/lib","core/trace","domplate/popupMenu"],function(t,o,n,e){function a(){this.buttons=[]}var i=t.domplate,s=t.DIV,l=t.SPAN,r=i({tag:s({class:"toolbar",onclick:"$onClick"}),buttonTag:l({class:"$button|getClassName toolbarButton",title:"$button.tooltiptext",$text:"$button|hasLabel",onclick:"$button|getCommand"},"$button|getLabel"),dropDownTag:l({class:"$button|getClassName toolbarButton dropDown",_repObject:"$button",title:"$button.tooltiptext",$text:"$button|hasLabel",onclick:"$onDropDown"},"$button|getLabel",l({class:"arrow"})),separatorTag:l({class:"toolbarSeparator",style:"color: gray;"},"|"),hasLabel:function(t){return!!t.label},getLabel:function(t){return t.label?t.label:""},getClassName:function(t){return t.className?t.className:""},getCommand:function(t){return t.command?t.command:function(){}},onClick:function(t){var n=$.event.fix(t||window.event);o.cancelEvent(n)},onDropDown:function(t){var n=$.event.fix(t||window.event),a=n.target,i=o.getAncestorByClass(a,"toolbarButton"),s=i.repObject.items,l=new e({id:"toolbarContextMenu",items:s});l.showPopup(i)}});return a.prototype={addButton:function(t){t.tooltiptext||(t.tooltiptext=""),this.buttons.push(t)},removeButton:function(t){for(var o=0;o<this.buttons.length;o++)if(this.buttons[o].id===t){this.buttons.splice(o,1);break}},addButtons:function(t){for(var o=0;o<t.length;o++)this.addButton(t[o])},getButton:function(t){for(var o=0;o<this.buttons.length;o++)if(this.buttons[o].id===t)return this.buttons[o]},render:function(t){if(this.buttons.length){this.element&&(t=this.element.parentNode),this.element=r.tag.replace({},t);for(var o=0;o<this.buttons.length;o++){var n=this.buttons[o],e=n.items?r.dropDownTag:r.buttonTag,a=n.tag?n.tag:e,i=a.append({button:n},this.element);n.initialize&&n.initialize(i),o<this.buttons.length-1&&r.separatorTag.append({},this.element)}return this.element}}},a});